<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="Your site description." />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Responsive Tests</title>

    <!-- Combined CSS as respond.js cannot cater for imports-->
    <link href="../../rel/responsive.css" rel="stylesheet" />

    <!--[if lt IE 9 &!(IEMobile)]>
        <script src="../test-assets/js/vendor/html5shiv.min.js"></script>
        <script src="../test-assets/js/vendor/respond.min.js"></script>
    <![endif]-->

    <link href="../test-assets/css/tests.css" rel="stylesheet" />
    <style type="text/css">
        .swipe {
            background-color: #f357a1;
            color: #fff;
            font-size: 2em;
            height: 300px;
            width: 300px;
            text-align: center;
            padding-top: 100px;
        }
    </style>
</head>
<body>
    <article class="container">
        <h1>Swipe Tests</h1>
        <hr />

        <h2>Swipe on the box to test directional detection.</h2>
        <div class="swipe"></div>

    </article>


    <!--[if IE 8]>     
    <script src="../test-assets/js/vendor/jquery-1.10.2.min.js"></script>
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <script src="../test-assets/js/vendor/jquery-2.0.3.min.js"></script>
    <!--<![endif]-->

    <!-- Scripts kept separate for easier debugging-->
    <!--    <script src="../../src/js/000-responsive.utils.js"></script>-->
    <!--    <script src="../../src/js/responsive.autosize.js"></script>
        <script src="../../src/js/responsive.carousel.js"></script>
        <script src="../../src/js/responsive.dismiss.js"></script>
        <script src="../../src/js/responsive.dropdown.js"></script>
        <script src="../../src/js/responsive.lightbox.js"></script>
        <script src="../../src/js/responsive.table.js"></script>
        <script src="../../src/js/responsive.tabs.js"></script>-->

    <script>

        $.fn.swipe = function (namespace) {
            /// <summary>Adds swiping functionality to the given element.</summary>
            /// <param name="namespace" type="String">The namespace for isolating the touch events.</param>
            /// <returns type="jQuery">The jQuery object for chaining.</returns>

            var ns = namespace && ("." + namespace),
                eswipestart = "swipestart" + ns,
                eswipemove = "swipemove" + ns,
                eswipeend = "swipeend" + ns,
                etouchstart = "touchstart" + ns + " pointerdown" + ns + " MSPointerDown" + ns,
                etouchmove = "touchmove" + ns + " pointermove" + ns + "  MSPointerMove" + ns,
                etouchend = "touchend" + ns + " pointerup" + ns + "  MSPointerUp" + ns,
                supportTouch = ("ontouchstart" in window) || (navigator.maxTouchPoints > 0) ||
                    (navigator.msMaxTouchPoints > 0) ||
                    (window.DocumentTouch && document instanceof DocumentTouch);

            return this.each(function () {

                if (!supportTouch) {
                    return;
                }

                var $this = $(this);

                // Enable extended touch events on ie.
                $this.css({ "-ms-touch-action": "none", "touch-action": "none" });

                var start = {},
                    delta,
                    move = function (event) {

                        // Normalise the variables.
                        var isPointer = event.type !== "touchmove",
                            original = event.originalEvent,
                            moveEvent = $.Event(eswipemove);

                        // Ensure swiping with one touch and not pinching.
                        if (isPointer) {
                            if (original.pointerType && original.pointerType !== 2) {
                                return;
                            }
                        } else {
                            if (original.touches.length > 1) {
                                return;
                            }
                        }
                        if (event.scale && event.scale !== 1) {
                            return;
                        }

                        $this.trigger(moveEvent);

                        if (moveEvent.isDefaultPrevented()) {
                            return;
                        }

                        var dx = isPointer ? original.clientX : original.touches[0].pageX,
                            dy = isPointer ? original.clientY : original.touches[0].pageY;

                        // Measure change in x and y.
                        delta = {
                            x: dx - start.x,
                            y: dy - start.y
                        };
                    },
                    end = function () {

                        // Measure duration
                        var duration = +new Date() - start.time,
                            endEvent;

                        // Determine if slide attempt triggers next/previous slide.
                        // If slide duration is less than 1000ms
                        // and if slide amount is greater than 20px
                        // or if slide amount is greater than half the width
                        var isValidSlide = (Number(duration) < 1000 &&
                            (Math.abs(delta.x) > 20 || Math.abs(delta.y) > 20 ||
                                Math.abs(delta.x) > $this[0].clientWidth / 2 ||
                                Math.abs(delta.y) > $this[0].clientHeight / 2));

                        if (isValidSlide) {

                            // Set the direction and return it.
                            var horizontal = delta.x < 0 ? "left" : "right",
                                vertical = delta.y < 0 ? "up" : "down",
                                direction = Math.abs(delta.x) > Math.abs(delta.y) ? horizontal : vertical;

                            endEvent = $.Event(eswipeend, { delta: delta, direction: direction, duration: duration });

                            $this.trigger(endEvent);
                        }

                        // Disable the touch events till next time.
                        $this.off(etouchmove).off(etouchend);
                    };

                $this.off(etouchstart).on(etouchstart, function (event) {

                    // Normalise the variables.
                    var isPointer = event.type !== "touchstart",
                        original = event.originalEvent,
                        startEvent = $.Event(eswipestart);

                    $this.trigger(startEvent);

                    if (startEvent.isDefaultPrevented()) {
                        return;
                    }

                    // Measure start values.
                    start = {
                        // Get initial touch coordinates.
                        x: isPointer ? original.clientX : original.touches[0].pageX,
                        y: isPointer ? original.clientY : original.touches[0].pageY,

                        // Store time to determine touch duration.
                        time: +new Date()
                    };

                    // Reset delta and end measurements.
                    delta = {};

                    // Attach touchmove and touchend listeners.
                    $this.on(etouchmove, move)
                        .on(etouchend, end);
                });
            });
        };

    </script>
    <script>




        $(document).on("ready", function () {


            var supportTouch = ("ontouchstart" in window) || (navigator.maxTouchPoints > 0) ||
                    (navigator.msMaxTouchPoints > 0) ||
                    (window.DocumentTouch && document instanceof DocumentTouch);

            $(".swipe").html(supportTouch === undefined ? "no touch support detected" : "touch support detected");


            $(".swipe").swipe("r.swipe").on("swipeend.r.swipe", function (event) {

                $(this).html(event.direction);

            });

        });

    </script>
</body>
</html>
